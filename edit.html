<!DOCTYPE html>
<html>
<head>
    <title>Edit Friend</title>
    <link rel="stylesheet" type="text/css" href="css/styles.css">
    <style>
         @media screen and (min-width: 1200px) {
            .friend-info {
                width: 50%;
                margin: 10px auto;
            }

            #friendList {
                display: flex;
                flex-wrap: wrap;
                justify-content: space-around;
            }
        }

        @media screen and (max-width: 1199px) and (min-width: 768px) {
            .friend-info {
                width: 80%;
                margin: 10px auto;
            }
        }

        @media screen and (max-width: 767px) {
            .friend-info {
                width: 90%;
                margin: 10px auto;
            }

            a {
                width: 100%;
                text-align: center;
            }
        }
    </style>
</head>
<body>
    <h1>Edit Friend</h1>
    <form id="editForm">
        <label for="name">Name:</label>
        <input type="text" id="name" required>

        <label for="age">Age:</label>
        <input type="number" id="age" required>

        <label for="contact">Contact:</label>
        <input type="number" id="contact" required>

        <label for="birthday">Birthday:</label>
        <input type="text" id="birthday" required>

        <label for="relationship">Relationship:</label>
        <input type="text" id="relationship" required>

        <label for="address">Address:</label>
        <input type="text" id="address" required>
    </form>
    <button id="editButton">Edit</button>
    <script>
        function getFriendsFromLocalStorage() {
            return JSON.parse(localStorage.getItem("friends")) || [];
        }

        document.getElementById("editButton").addEventListener("click", function () {
            const updatedName = document.getElementById("name").value;
            const updatedAge = document.getElementById("age").value;
            const updatedContact = document.getElementById("contact").value;
            const updatedBirthday = document.getElementById("birthday").value;
            const updatedRelationship = document.getElementById("relationship").value;
            const updatedAddress = document.getElementById("address").value;

            if (!updatedName.trim()) {
                alert("Name is a required field.");
                return; 
            }

            if (isNaN(updatedAge) || updatedAge === "") {
                alert("Age must be a valid number.");
                return; 
            }

            const friendId = new URLSearchParams(window.location.search).get("id");
            const friends = getFriendsFromLocalStorage();
            const friend = friends.find((f) => f.id == friendId);

            
            if (friend) {
                friend.name = updatedName;
                friend.age = updatedAge;
                friend.contact = updatedContact;
                friend.birthday = updatedBirthday;
                friend.relationship = updatedRelationship;
                friend.address = updatedAddress;

                localStorage.setItem("friends", JSON.stringify(friends));

                alert("Friend edited!");

                window.location.href = `view.html?id=${friend.id}`;
            } else {
                alert("Friend not found!");
                window.location.href = "index.html";
            }
        });
    </script>
</body>
</html>
